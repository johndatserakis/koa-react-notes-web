(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n.n(r),o=n(32),c=n.n(o),u=(n(76),n(2)),i=n.n(u),l=n(5),p=n(8),h=n(9),m=n(12),d=n(10),f=n(13),b=n(18),g=n(144),v=n(139),k=n(140),y=n(143),E=n(11),w=n(62),j=n.n(w).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL+"/api/v1"}),O=function(e){j.defaults.headers.common.Authorization="Bearer "+e},x=n(63),C=n.n(x),N=n(6),S=n(27),I=n(64),T=n(65),P=n(26),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null,accessToken:null,refreshToken:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user:setUser":return Object(P.a)({},e,{user:t.payload});case"user:setAccessToken":return Object(P.a)({},e,{accessToken:t.payload});case"user:setRefreshToken":return Object(P.a)({},e,{refreshToken:t.payload});default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notes:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"notes:addNotes":return Object(P.a)({},e,{notes:e.notes.concat(t.payload)});case"notes:setNotes":return Object(P.a)({},e,{notes:t.payload});case"notes:addNoteToStack":return Object(P.a)({},e,{notes:[t.payload].concat(e.notes)});case"notes:editNoteInStack":var n=e.notes.map(function(e){return e.id}).indexOf(Number(t.payload.id));return e.notes[n].title=t.payload.title,e.notes[n].content=t.payload.content,Object(P.a)({},e,{notes:e.notes});case"notes:deleteNoteInStack":var a=e.notes.map(function(e){return e.id}).indexOf(Number(t.payload.id));return e.notes.splice(a,1),Object(P.a)({},e,{notes:e.notes});default:return e}},A=Object(S.combineReducers)({user:R,notes:_}),U=Object(I.composeWithDevTools)({})(Object(S.applyMiddleware)(T.a)),L=Object(S.createStore)(A,{},U),B=function(){return function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({type:"notes:setNotes",payload:null});case 3:return e.abrupt("return",Promise.resolve());case 6:throw e.prev=6,e.t0=e.catch(0),new Error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n,a){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,O(a().user.accessToken),t.next=4,j.get("notes",{params:{sort:e.sort,order:e.order,page:e.page,limit:e.limit}});case 4:return r=t.sent,t.next=7,n({type:"notes:setNotes",payload:r.data});case 7:return t.abrupt("return",Promise.resolve());case 10:throw t.prev=10,t.t0=t.catch(0),new Error(t.t0);case 13:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e,n){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n,a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,O(a().user.accessToken),t.next=4,j.get("notes/"+e);case 4:return t.abrupt("return",t.sent);case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}()},K=n(25),q=Object(K.a)({basename:""}),H=function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=C()(e.accessToken),t.next=4,n({type:"user:setUser",payload:a.data});case 4:return t.next=6,n({type:"user:setAccessToken",payload:e.accessToken});case 6:return t.next=8,n({type:"user:setRefreshToken",payload:e.refreshToken});case 8:return localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),t.abrupt("return",Promise.resolve());case 13:throw t.prev=13,t.t0=t.catch(0),new Error(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e){return t.apply(this,arguments)}}()},V=function(){return function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({type:"user:setUser",payload:null});case 3:return e.next=5,t({type:"user:setAccessToken",payload:null});case 5:return e.next=7,t({type:"user:setRefreshToken",payload:null});case 7:return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e.abrupt("return",Promise.resolve());case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},M=function(e){return function(){var e=Object(l.a)(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(n().user.accessToken),e.next=4,j.post("user/refreshAccessToken",{username:n().user.user.username,refreshToken:n().user.refreshToken});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}()};function z(){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=L.dispatch(M())).then(function(){a=null}).catch(function(){a=null}),e.abrupt("return",a);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.dispatch(V());case 2:return e.next=4,L.dispatch(B());case 4:N.toast.error("There was an error authenticating your session. Please login again."),q.push("/");case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}j.interceptors.response.use(void 0,function(){var e=Object(l.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.response.status||"TOKEN_EXPIRED"!==t.response.data.message||t.config.__isRetryRequest){e.next=17;break}return e.prev=1,e.next=4,z();case 4:return n=e.sent,e.next=7,L.dispatch(H({accessToken:n.data.accessToken,refreshToken:n.data.refreshToken}));case 7:return t.config.headers.Authorization="Bearer "+L.getState().user.accessToken,t.config.__isRetryRequest=!0,t.config.baseURL="",e.abrupt("return",j(t.config));case 13:return e.prev=13,e.t0=e.catch(1),W(),e.abrupt("return",Promise.reject(e.t0));case 17:if(401!==t.response.status||"AUTHENTICATION_ERROR"!==t.response.data.message){e.next=20;break}return W(),e.abrupt("return",Promise.reject(t));case 20:if(401!==t.response.status||"INVALID_REFRESH_TOKEN"!==t.response.data.message){e.next=23;break}return W(),e.abrupt("return",Promise.reject(t));case 23:return e.abrupt("return",Promise.reject(t));case 24:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}());var X=n(15),Y=n(35);function Q(){var e=Object(b.a)(["\n    background: ",";\n    color: ",";\n    padding: 30px 20px;\n    border-radius: 4px;\n"]);return Q=function(){return e},e}function Z(){var e=Object(b.a)(["\n    display: block;\n    width: 100%;\n    padding: .375rem .75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    color: ",";\n    background-color: ",";\n    background-clip: padding-box;\n    border: 1px solid ",";\n    border-radius: 4px;\n    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n    margin-bottom: 15px;\n"]);return Z=function(){return e},e}function $(){var e=Object(b.a)(["\n    display: block;\n    width: 100%;\n    padding: .375rem .75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    color: ",";\n    background-color: ",";\n    background-clip: padding-box;\n    border: 1px solid ",";\n    border-radius: 4px;\n    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n    margin-bottom: 15px;\n"]);return $=function(){return e},e}function ee(){var e=Object(b.a)(["\n    font-size: 1.1rem;\n    border-radius: 4px;\n    padding: 0.25rem 1rem;\n    margin: 0;\n    border: 1px solid ",";\n    background: ",";\n    color: ",";\n    text-transform: uppercase;\n\n    &:hover {\n        background: ",";\n        cursor: pointer;\n    }\n\n    &:active {\n        background: ",";\n    }\n"]);return ee=function(){return e},e}function te(){var e=Object(b.a)(["\n    // @import url('https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700');\n    // @import url('https://cdn.jsdelivr.net/fontawesome/4.7.0/css/font-awesome.min.css');\n\n    html {\n        position: relative;\n        height: 100%;\n    }\n\n    body {\n        height: 100%;\n        overflow-x: hidden;\n        color: #333;\n        font-weight: 400;\n        background: #fff;\n        font-family: 'Source Sans Pro', sans-serif;\n    }\n\n    #root {\n        height: 100%;\n    }\n\n    input:not(:placeholder-shown):valid {\n        border: 1px solid green;\n    }\n\n    input:not(:placeholder-shown):invalid {\n        border: 1px solid #E15358;\n        background: #e4c8c9;\n    }\n"]);return te=function(){return e},e}var ne={white:"#FFFFFF",black:"#333333",grey:"#eeeeee",darkGrey:"#bbb",blue:"#488ED8",yellow:"yellow",green:"#52C989",red:"red"},ae=Object(X.createGlobalStyle)(te()),re=X.default.button(ee(),function(e){return e?e.theme[e.styleType]:e.theme.blue},function(e){return e?e.theme[e.styleType]:e.theme.blue},function(e){return e.theme.white},function(e){return e?Object(Y.a)(.1,e.theme[e.styleType]):Object(Y.a)(.1,e.theme[e.blue])},function(e){return e?Object(Y.a)(.15,e.theme[e.styleType]):Object(Y.a)(.15,e.theme[e.blue])}),se=X.default.input($(),function(e){return e.theme.black},function(e){return e.theme.white},function(e){return e.theme.darkGrey}),oe=X.default.textarea(Z(),function(e){return e.theme.black},function(e){return e.theme.white},function(e){return e.theme.darkGrey}),ce=X.default.div(Q(),function(e){return e.theme.blue},function(e){return e.theme.white}),ue=n(4),ie=n(134),le=(n(113),n(133)),pe=n(135),he=n(142),me=n(136),de=n(137),fe=n(138),be={userLogout:V},ge=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).toggle=n.toggle.bind(Object(ue.a)(Object(ue.a)(n))),n.state={isOpen:!1},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"logoutClicked",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,this.props.userLogout();case 4:this.props.history.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"navbar-section"},s.a.createElement(le.a,{dark:!0,expand:"md"},s.a.createElement(ie.a,{to:"/",className:"navbar-brand"},s.a.createElement("i",{className:"fa fa-sticky-note fa-fw"})," Koa-React-Notes"),s.a.createElement(pe.a,{onClick:this.toggle}),s.a.createElement(he.a,{isOpen:this.state.isOpen,navbar:!0},this.props.user&&s.a.createElement(me.a,{className:"mr-auto",navbar:!0},s.a.createElement(de.a,null,s.a.createElement(ie.a,{to:"/dashboard",className:"nav-link"},"Dashboard")),s.a.createElement(de.a,null,s.a.createElement("a",{href:"# ",onClick:this.logoutClicked.bind(this),className:"nav-link"},"Logout"))),!this.props.user&&s.a.createElement(me.a,{className:"mr-auto",navbar:!0},s.a.createElement(de.a,null,s.a.createElement(ie.a,{to:"/user/signup",className:"nav-link"},"Signup")),s.a.createElement(de.a,null,s.a.createElement(ie.a,{to:"/user/login",className:"nav-link"},"Login")),s.a.createElement(de.a,null,s.a.createElement(ie.a,{to:"/user/forgot",className:"nav-link"},"Forgot"))),s.a.createElement(me.a,{className:"ml-auto",navbar:!0},s.a.createElement(de.a,null,s.a.createElement(fe.a,{href:"https://koa-vue-notes-web.innermonkdesign.com/"},"Visit the Vue Version!")),s.a.createElement(de.a,null,s.a.createElement(fe.a,{href:"https://github.com/johndatserakis/koa-react-notes-web"},"Web Code")),s.a.createElement(de.a,null,s.a.createElement(fe.a,{href:"https://github.com/johndatserakis/koa-vue-notes-api"},"API Code")),s.a.createElement(de.a,null,s.a.createElement(fe.a,{href:"https://github.com/johndatserakis/"},s.a.createElement("i",{className:"fa fa-info-circle"})))))))}}]),t}(s.a.Component),ve=Object(y.a)(Object(E.b)(function(e,t){return{user:e.user.user}},be)(ge)),ke=n(34);function ye(){var e=Object(b.a)(["\n  max-width: 1024px;\n"]);return ye=function(){return e},e}var Ee=Object(X.default)(ke.Box)(ye());function we(){var e=Object(b.a)(["\n    background: ",";\n    padding: 30px 0;\n    text-align: center;\n    color: ",";\n"]);return we=function(){return e},e}Ee.defaultProps={mx:"auto"},ke.Box.defaultProps={px:[2,2,2,0]};var je=X.default.section(we(),function(e){return e.theme.grey},function(e){return e.theme.black}),Oe=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement(je,null,s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{mx:"auto"},s.a.createElement("div",null,s.a.createElement("a",{href:"https://github.com/johndatserakis"},"Koa-React-Notes")," is a SPA using Koa (2.3) as the ",s.a.createElement("a",{href:"https://github.com/johndatserakis/koa-react-notes-api"},"backend")," and React (16.8.3) as the ",s.a.createElement("a",{href:"https://github.com/johndatserakis/koa-react-notes-api"},"frontend"),".")))))}}]),t}(s.a.Component),xe=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{width:1,py:4},s.a.createElement("h1",null,s.a.createElement("strong",null,"Home")),s.a.createElement("p",null,"Here will be a check to see if you are currently logged in and your user info."),this.props.user?s.a.createElement("p",null,"Username: ",this.props.user.username):s.a.createElement("p",null,"Hmm, doesn't look like you're logged in..."),s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-info-circle fa-fw"})," This is a simple SPA built using Koa (2.5.1) as the backend and React (16.8.3) as the frontend. If you don't want to create an account you can just use demousername and demopassword to login to the app."),s.a.createElement("p",null,"This site has a sister! Visit it here - ",s.a.createElement("a",{href:"https://koa-vue-notes-web.innermonkdesign.com/",target:"_blank",rel:"noopener noreferrer"},"https://koa-vue-notes-web.innermonkdesign.com/"),". It's the exact same app - but written in Vue!"),s.a.createElement("p",null,s.a.createElement("a",{href:"https://github.com/johndatserakis/koa-react-notes-web",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/badge/frontend--social.svg?style=social",alt:""})),s.a.createElement("a",{href:"https://twitter.com/intent/tweet?text=Check+out+this+project+on+GitHub:+https://github.com/johndatserakis/koa-react-notes-web&url=%5Bobject%20Object%5D",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/twitter/url/https/github.com/johndatserakis/koa-react-notes-web.svg?style=social",alt:""})),s.a.createElement("a",{href:"https://raw.githubusercontent.com/johndatserakis/koa-react-notes-web/master/LICENSE",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/badge/license-MIT-blue.svg",alt:""})),s.a.createElement("a",{href:"https://github.com/johndatserakis/koa-react-notes-web/stargazers",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/github/stars/johndatserakis/koa-react-notes-web.svg",alt:""})),s.a.createElement("a",{href:"https://github.com/johndatserakis/koa-react-notes-web/network",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/github/forks/johndatserakis/koa-react-notes-web.svg",alt:""}))),s.a.createElement("p",null,s.a.createElement("a",{href:"https://github.com/johndatserakis/koa-vue-notes-api",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/badge/Backend--social.svg?style=social",alt:""})),s.a.createElement("a",{href:"https://twitter.com/intent/tweet?text=Check+out+this+project+on+GitHub:+https://github.com/johndatserakis/koa-vue-notes-api&url=%5Bobject%20Object%5D",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/twitter/url/https/github.com/johndatserakis/koa-vue-notes-api.svg?style=social",alt:""})),s.a.createElement("a",{href:"https://raw.githubusercontent.com/johndatserakis/koa-vue-notes-api/master/LICENSE",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/badge/license-MIT-blue.svg",alt:""})),s.a.createElement("a",{href:"https://github.com/johndatserakis/koa-vue-notes-api/stargazers",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/github/stars/johndatserakis/koa-vue-notes-api.svg",alt:""})),s.a.createElement("a",{href:"https://github.com/johndatserakis/koa-vue-notes-api/network",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"https://img.shields.io/github/forks/johndatserakis/koa-vue-notes-api.svg",alt:""}))))))}}]),t}(s.a.Component),Ce=Object(E.b)(function(e,t){return{user:e.user.user}})(xe),Ne=n(21),Se={userActionLogin:function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.post("user/authenticate",e);case 3:return a=t.sent,t.next=6,n(H(a.data));case 6:return t.abrupt("return",Promise.resolve());case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0.response.data.message);case 12:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},getNotes:D},Ie=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:""},n.handleInputChange=n.handleInputChange.bind(Object(ue.a)(Object(ue.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ue.a)(Object(ue.a)(n))),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(Ne.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,this.props.userActionLogin({username:this.state.username,password:this.state.password});case 4:return N.toast.success("Logged in."),e.next=7,this.props.getNotes({sort:"",order:"desc",page:0,limit:1e4});case 7:this.props.history.push("/dashboard"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),N.toast.error("Hmm, those details don't seem right.");case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{width:[1,.5],mx:"auto",py:4},s.a.createElement(ce,null,s.a.createElement("h1",null,"Login"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Username"),s.a.createElement(se,{type:"text",name:"username",placeholder:" ",value:this.state.username,onChange:this.handleInputChange,required:!0}),s.a.createElement("label",null,"Password"),s.a.createElement(se,{type:"password",name:"password",placeholder:" ",value:this.state.password,onChange:this.handleInputChange,required:!0}),s.a.createElement(re,{styleType:"green",className:"mt-2 w-100",type:"submit",value:"Submit"},"Login"))))))}}]),t}(s.a.Component),Te=Object(E.b)(function(e,t){return{user:e.user}},Se)(Ie),Pe={userActionSignup:function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.post("user/signup",e);case 3:return t.abrupt("return",Promise.resolve());case 6:throw t.prev=6,t.t0=t.catch(0),new Error(t.t0.response.data.message);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()}},Re=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={firstName:"",lastName:"",username:"",email:"",password:"",passwordConfirm:""},n.passwordConfirmElement=s.a.createRef(),n.passwordElement=s.a.createRef(),n.handleInputChange=n.handleInputChange.bind(Object(ue.a)(Object(ue.a)(n))),n.handleInputOnKeyup=n.handleInputOnKeyup.bind(Object(ue.a)(Object(ue.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ue.a)(Object(ue.a)(n))),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(Ne.a)({},a,n))}},{key:"handleInputOnKeyup",value:function(e){var t=e.target.name;"passwordConfirm"!==t&&"password"!==t||(this.state.password!==this.state.passwordConfirm?this.passwordConfirmElement.current.setCustomValidity("Passwords must match."):this.passwordConfirmElement.current.setCustomValidity(""))}},{key:"handleSubmit",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),document.getElementById("submit-form").checkValidity()){e.next=5;break}return N.toast.error("Please complete all fields."),e.abrupt("return");case 5:return e.prev=5,e.next=8,this.props.userActionSignup({firstName:this.state.firstName,lastName:this.state.lastName,username:this.state.username,email:this.state.email,password:this.state.password});case 8:N.toast.success("Successfully signed up. Please login."),this.props.history.push("/user/login"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0.message),e.t0.message?"DUPLICATE_USERNAME"===e.t0.message?N.toast.error("Hmm, that username is already in use. Please try another one."):"DUPLICATE_EMAIL"===e.t0.message?N.toast.error("Hmm, that email is already in use. Please try another one."):N.toast.error("There was an error connecting to the server. Please try again."):N.toast.error("There was an error connecting to the server. Please try again.");case 16:case"end":return e.stop()}},e,this,[[5,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{width:[1,.5],mx:"auto",py:4},s.a.createElement(ce,null,s.a.createElement("h1",null,"Signup"),s.a.createElement("form",{onSubmit:this.handleSubmit,id:"submit-form"},s.a.createElement("label",null,"First Name"),s.a.createElement(se,{type:"text",name:"firstName",placeholder:" ",value:this.state.firstName,onChange:this.handleInputChange,required:!0}),s.a.createElement("label",null,"Last Name"),s.a.createElement(se,{type:"text",name:"lastName",placeholder:" ",value:this.state.lastName,onChange:this.handleInputChange,required:!0}),s.a.createElement("label",null,"Username"),s.a.createElement(se,{type:"text",name:"username",placeholder:" ",value:this.state.username,onChange:this.handleInputChange,required:!0}),s.a.createElement("label",null,"Email"),s.a.createElement(se,{type:"email",name:"email",placeholder:" ",value:this.state.email,onChange:this.handleInputChange,required:!0}),s.a.createElement("label",null,"Password (Must be at least 8 characters with no spaces.)"),s.a.createElement(se,{type:"password",name:"password",placeholder:" ",value:this.state.password,onChange:this.handleInputChange,onKeyUp:this.handleInputOnKeyup,required:!0,pattern:"\\S{8,}",title:"Must be at least 8 characters with no spaces.",ref:this.passwordElement}),s.a.createElement("label",null,"Confirm Password"),s.a.createElement(se,{type:"password",name:"passwordConfirm",placeholder:" ",value:this.state.passwordConfirm,onChange:this.handleInputChange,onKeyUp:this.handleInputOnKeyup,ref:this.passwordConfirmElement,title:"Passwords must match."}),s.a.createElement(re,{styleType:"green",className:"mt-2 w-100",type:"submit",value:"Submit"},"Signup"))))))}}]),t}(s.a.Component),_e=Object(E.b)(function(e,t){return{user:e.user}},Pe)(Re),Ae={userActionForgot:function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.post("user/forgot",e);case 3:return t.abrupt("return",Promise.resolve());case 6:throw t.prev=6,t.t0=t.catch(0),new Error(t.t0.response.data.message);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()}},Ue=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={email:"",url:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_URL+"/user/reset",type:"web"},n.handleInputChange=n.handleInputChange.bind(Object(ue.a)(Object(ue.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ue.a)(Object(ue.a)(n))),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleInputChange",value:function(e){e.preventDefault();var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(Ne.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,this.props.userActionForgot({email:this.state.email,url:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_URL+"/user/reset",type:"web"});case 4:N.toast.success("Please check your email address."),this.props.history.push("/"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),N.toast.success("Please check your email address."),this.props.history.push("/");case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{width:[1,.5],mx:"auto",py:4},s.a.createElement(ce,null,s.a.createElement("h1",null,"Forgot"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Email"),s.a.createElement(se,{type:"email",name:"email",placeholder:" ",value:this.state.username,onChange:this.handleInputChange,required:!0}),s.a.createElement(re,{styleType:"green",className:"mt-2 w-100",type:"submit",value:"Submit"},"Forgot"))))))}}]),t}(s.a.Component),Le=Object(E.b)(function(e,t){return{user:e.user}},Ae)(Ue),Be=n(28),De=n.n(Be),Fe={userActionReset:function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.post("user/resetPassword",e);case 3:return t.abrupt("return",Promise.resolve());case 6:throw t.prev=6,t.t0=t.catch(0),new Error(t.t0.response.data.message);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()}},Ke=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={passwordResetToken:De.a.parse(n.props.location.search).passwordResetToken,email:De.a.parse(n.props.location.search).email,password:"",passwordConfirm:""},n.passwordConfirmElement=s.a.createRef(),n.passwordElement=s.a.createRef(),n.handleInputChange=n.handleInputChange.bind(Object(ue.a)(Object(ue.a)(n))),n.handleInputOnKeyup=n.handleInputOnKeyup.bind(Object(ue.a)(Object(ue.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ue.a)(Object(ue.a)(n))),De.a.parse(n.props.location.search).passwordResetToken&&De.a.parse(n.props.location.search).email||(N.toast.error("Hmm, please make sure you followed the correct link to reset your password."),n.props.history.push("/")),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(Ne.a)({},a,n))}},{key:"handleInputOnKeyup",value:function(e){var t=e.target.name;"passwordConfirm"!==t&&"password"!==t||(this.state.password!==this.state.passwordConfirm?this.passwordConfirmElement.current.setCustomValidity("Passwords must match."):this.passwordConfirmElement.current.setCustomValidity(""))}},{key:"handleSubmit",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),document.getElementById("reset-form").checkValidity()){e.next=5;break}return N.toast.error("Please complete all fields."),e.abrupt("return");case 5:return e.prev=5,e.next=8,this.props.userActionReset({password:this.state.password,passwordResetToken:this.state.passwordResetToken,email:this.state.email});case 8:N.toast.success("Successfully reset password. Please login."),this.props.history.push("/user/login"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0),e.t0.message&&"RESET_TOKEN_EXPIRED"===e.t0.message?N.toast.error("Your reset link has expired. Please use the forgot form to recieve another link.",{autoClose:5e3}):N.toast.error("There was an issue resetting your password. Please use the forgot form to recieve another link.");case 16:case"end":return e.stop()}},e,this,[[5,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{width:[1,.5],mx:"auto",py:4},s.a.createElement(ce,null,s.a.createElement("h1",null,"Reset"),s.a.createElement("form",{onSubmit:this.handleSubmit,id:"reset-form"},s.a.createElement("label",null,"Password (Must be at least 8 characters with no spaces.)"),s.a.createElement(se,{type:"password",name:"password",placeholder:" ",value:this.state.password,onChange:this.handleInputChange,onKeyUp:this.handleInputOnKeyup,required:!0,pattern:"\\S{8,}",title:"Must be at least 8 characters with no spaces.",ref:this.passwordElement}),s.a.createElement("label",null,"Confirm Password"),s.a.createElement(se,{type:"password",name:"passwordConfirm",placeholder:" ",value:this.state.passwordConfirm,onChange:this.handleInputChange,onKeyUp:this.handleInputOnKeyup,ref:this.passwordConfirmElement,title:"Passwords must match."}),s.a.createElement(re,{styleType:"green",className:"mt-2 w-100",type:"submit",value:"Submit"},"Reset"))))))}}]),t}(s.a.Component),qe=Object(E.b)(function(e,t){return{user:e.user}},Fe)(Ke);function He(){var e=Object(b.a)([""]);return He=function(){return e},e}function Ve(){var e=Object(b.a)(["\n    font-size: 1.4rem;\n    color: ",";\n    font-weight: bold;\n"]);return Ve=function(){return e},e}function Me(){var e=Object(b.a)(["\n    background: ",";\n    margin-bottom: 20px;\n    padding: 10px;\n    border-radius: 4px;\n    border: 1px solid ",";\n\n    &:hover {\n        opacity: 0.8;\n        cursor: pointer;\n    }\n"]);return Me=function(){return e},e}var ze=X.default.div(Me(),function(e){return e.theme.grey},function(e){return e.theme.darkGrey}),Ge=X.default.div(Ve(),function(e){return e.theme.black}),We=X.default.div(He()),Je=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"noteClicked",value:function(e,t){this.props.history.push("/editNote?id="+t.id)}},{key:"render",value:function(){var e=this,t=this.props.notes.map(function(t,n){return s.a.createElement(ze,{key:n,onClick:function(n){return e.noteClicked(n,t)}},s.a.createElement(Ge,null,t.title),s.a.createElement(We,null,t.content))});return s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{width:[1,2/3],mx:"auto",py:4},s.a.createElement(ie.a,{to:"/createNote",className:"btn btn-primary mb-3"},"Create Note"),t)))}}]),t}(s.a.Component),Xe=Object(y.a)(Object(E.b)(function(e,t){return{user:e.user.user,notes:e.notes.notes}})(Je)),Ye={createNote:function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n,a){var r,s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,O(a().user.accessToken),t.next=4,j.post("notes",e);case 4:return r=t.sent,s=r.data.id[0],t.next=8,n(F(s));case 8:return o=t.sent,t.next=11,n({type:"notes:addNoteToStack",payload:o.data});case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(0),new Error(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e,n){return t.apply(this,arguments)}}()}},Qe=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={title:"",content:""},n.handleInputChange=n.handleInputChange.bind(Object(ue.a)(Object(ue.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ue.a)(Object(ue.a)(n))),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(Ne.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,this.props.createNote({title:this.state.title,content:this.state.content});case 4:N.toast.success("Note created"),this.props.history.push("/dashboard"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),N.toast.error("Hmm, there was an issue connection to the server. Please try again.");case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{width:[1,.5],mx:"auto",py:4},s.a.createElement("h1",null,"Create Note"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Title"),s.a.createElement(se,{type:"text",name:"title",placeholder:" ",value:this.state.title,onChange:this.handleInputChange,required:!0}),s.a.createElement("label",null,"Content"),s.a.createElement(oe,{placeholder:" ",name:"content",value:this.state.content,onChange:this.handleInputChange,required:!0}),s.a.createElement(re,{styleType:"green",className:"mt-2 w-100",type:"submit",value:"Submit"},s.a.createElement("i",{className:"fa fa-save fa-fw"}),"Save")))))}}]),t}(s.a.Component),Ze=Object(y.a)(Object(E.b)(function(e,t){return{user:e.user}},Ye)(Qe)),$e={saveNote:function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n,a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,O(a().user.accessToken),t.next=4,j.put("notes/"+e.id,{title:e.title,content:e.content});case 4:return t.next=6,n({type:"notes:editNoteInStack",payload:{id:e.id,title:e.title,content:e.content}});case 6:t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),new Error(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}()},getNote:F,deleteNote:function(e){return function(){var t=Object(l.a)(i.a.mark(function t(n,a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,O(a().user.accessToken),t.next=4,j.delete("notes/"+e);case 4:return t.next=6,n({type:"notes:deleteNoteInStack",payload:{id:e}});case 6:t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),new Error(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}()}},et=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={noteId:De.a.parse(n.props.location.search).id,title:"",content:""},n.handleInputChange=n.handleInputChange.bind(Object(ue.a)(Object(ue.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ue.a)(Object(ue.a)(n))),De.a.parse(n.props.location.search).id||n.props.history.push("/dashboard"),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(Ne.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,this.props.saveNote({id:this.state.noteId,title:this.state.title,content:this.state.content});case 4:N.toast.success("Note saved."),this.props.history.push("/dashboard"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),N.toast.error("Hmm, there was an issue connection to the server. Please try again.");case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.getNote(this.state.noteId);case 3:t=e.sent,this.setState({title:t.data.title,content:t.data.content}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N.toast.error("Hmm, there was an issue connection to the server. Please try again.");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"deleteButtonClicked",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,this.props.deleteNote(this.state.noteId);case 4:this.props.history.push("/dashboard"),N.toast.success("Note deleted."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),N.toast.error("Hmm, there was an issue connection to the server. Please try again.");case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(Ee,null,s.a.createElement(ke.Flex,null,s.a.createElement(ke.Box,{width:[1,.5],mx:"auto",py:4},s.a.createElement("h1",null,"Edit Note"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Title"),s.a.createElement(se,{type:"text",name:"title",placeholder:" ",value:this.state.title,onChange:this.handleInputChange,required:!0}),s.a.createElement("label",null,"Content"),s.a.createElement(oe,{placeholder:" ",name:"content",value:this.state.content,onChange:this.handleInputChange,required:!0}),s.a.createElement(re,{styleType:"green",className:"mt-2 w-100",type:"submit",value:"Submit"},s.a.createElement("i",{className:"fa fa-save fa-fw"})," Save")),s.a.createElement(re,{styleType:"red",className:"mt-4",onClick:this.deleteButtonClicked.bind(this)},s.a.createElement("i",{className:"fa fa-trash fa-fw"}),"Delete Note"))))}}]),t}(s.a.Component),tt=Object(y.a)(Object(E.b)(function(e,t){return{user:e.user}},$e)(et));n(130);function nt(){var e=Object(b.a)(["\n    flex: 1 0 auto;\n"]);return nt=function(){return e},e}function at(){var e=Object(b.a)(["\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n"]);return at=function(){return e},e}var rt=X.default.div(at()),st=X.default.div(nt()),ot={setUserAndTokens:H,getNotes:D},ct=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={isLoadingUserInfo:!0},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkUserStatus();case 2:if(!this.props.user){e.next=5;break}return e.next=5,this.loadProgramData();case 5:this.setState({isLoadingUserInfo:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkUserStatus",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):null,n=localStorage.getItem("refreshToken")?localStorage.getItem("refreshToken"):null,!t){e.next=5;break}return e.next=5,this.props.setUserAndTokens({accessToken:t,refreshToken:n});case 5:return e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadProgramData",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getNotes({sort:"",order:"desc",page:0,limit:1e4});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.isLoadingUserInfo?"":s.a.createElement(X.ThemeProvider,{theme:ne},s.a.createElement(rt,null,s.a.createElement(ae,null),s.a.createElement(ve,null),s.a.createElement(st,null,s.a.createElement(g.a,null,s.a.createElement(v.a,{exact:!0,path:"/",component:Ce}),s.a.createElement(v.a,{path:"/user/login",component:Te}),s.a.createElement(v.a,{path:"/user/signup",component:_e}),s.a.createElement(v.a,{path:"/user/forgot",component:Le}),s.a.createElement(v.a,{path:"/user/reset",component:qe}),s.a.createElement(v.a,{path:"/dashboard",render:function(){return e.props.user?s.a.createElement(Xe,null):s.a.createElement(k.a,{to:"/"})}}),s.a.createElement(v.a,{path:"/createNote",render:function(){return e.props.user?s.a.createElement(Ze,null):s.a.createElement(k.a,{to:"/"})}}),s.a.createElement(v.a,{path:"/editNote",render:function(){return e.props.user?s.a.createElement(tt,null):s.a.createElement(k.a,{to:"/"})}}))),s.a.createElement(Oe,null),s.a.createElement(N.ToastContainer,{hideProgressBar:!0,autoClose:2500})))}}]),t}(s.a.Component),ut=Object(y.a)(Object(E.b)(function(e,t){return{user:e.user.user}},ot)(ct)),it=n(141);c.a.render(s.a.createElement(E.a,{store:L},s.a.createElement(it.a,null,s.a.createElement(ut,null))),document.getElementById("root"))},71:function(e,t,n){e.exports=n(131)}},[[71,1,2]]]);
//# sourceMappingURL=main.dbf74b2c.chunk.js.map